"use strict";var map;var maxX=50,minX=0,maxY=49.5,minY=0;var noTestData=1000;var randomData=[];var grid;var elementValue=function a(b){var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var d=document.getElementById(b).value;return c?parseInt(d):d};document.addEventListener("DOMContentLoaded",function(a){var b=["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"];createRandomData();map=L.map("map-content");map.fitBounds([[minY,minX],[maxY,maxX]]);L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:"&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors",opacity:0.3}).addTo(map);var c=[].slice.call(document.getElementsByClassName("render-on-change"),0);c.map(function(a){if(a.addEventListener){a.addEventListener("change",function(){render()})}});render()});var render=function a(){if(map.hasLayer(grid)){grid.unregister();map.removeLayer(grid)}grid=L.regularGridCluster({rules:getRules(),zoomShowElements:elementValue("select-elements-zoom",true),zoomHideGrid:elementValue("select-grid-zoom",true),zoneSize:elementValue("select-zone-size",true),gridMode:elementValue("select-grid-mode"),showCells:elementValue("select-show-cells")==="1",showEmptyCells:elementValue("select-show-empty-cells")==="1",showMarkers:elementValue("select-show-markers")==="1",showTexts:elementValue("select-show-texts")==="1",trackingTime:true});grid.addLayers(randomData);grid.addTo(map)};var createRandomData=function a(){for(var b=0;b<noTestData;b++){var c=[minX+Math.random()*(maxX-minX),minY+Math.random()*(maxY-minY)];var d={a:5+Math.floor(Math.random()*5),b:Math.floor(Math.random()*5)};var e=L.circleMarker(c,circleStyle(d));randomData.push({marker:e,properties:d})}};var parseTextAreaValue=function a(b){var c=document.getElementById(b).value;var d="{"+c+"}";try{return JSON.parse(d)}catch(a){alert("bad input "+b+", "+a);return{}}};var getRules=function a(){var b=parseTextAreaValue("textarea-rules-cells");var c=parseTextAreaValue("textarea-rules-markers");var d=parseTextAreaValue("textarea-rules-texts");return{cells:b,markers:c,texts:d}};var circleStyle=function a(b){return{fillColor:["#ffffcc","#a1dab4","#41b6c4","#2c7fb8","#253494"][b.b],color:"black",weight:1,radius:b.a/3,fillOpacity:1}};"use strict";L.Control.ZoomDisplay=L.Control.extend({options:{position:"topleft"},onAdd:function a(b){this._map=b;this._container=L.DomUtil.create("div","leaflet-control-zoom-display leaflet-bar-part leaflet-bar");this.updateMapZoom(b.getZoom());b.on("zoomend",this.onMapZoomEnd,this);return this._container},onRemove:function a(b){b.off("zoomend",this.onMapZoomEnd,this)},onMapZoomEnd:function a(b){this.updateMapZoom(this._map.getZoom())},updateMapZoom:function a(b){if(typeof b==="undefined"){b=""}this._container.innerHTML=b}});L.Map.mergeOptions({zoomDisplayControl:true});L.Map.addInitHook(function(){if(this.options.zoomDisplayControl){this.zoomDisplayControl=new L.Control.ZoomDisplay;this.addControl(this.zoomDisplayControl)}});L.control.zoomDisplay=function(a){return new L.Control.ZoomDisplay(a)};
